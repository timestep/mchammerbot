<!DOCTYPE html>
<html>
  <head>
    <title>Bender</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/keypress.js"></script>


  </head>
  <body>
    <div class="container">
      <div class="hero-unit">
      <h1> Bender Bending Rodriguez </h1>
      <p>Kiss my shiny metal ass.</p>
      <button id='forward' class='btn-large'>Forward</button>
      <button id='backward' class='btn-large'>Backward</button>
      <button id='turn_right' class='btn-large'>Turn Right</button>
      <button id='turn_left' class='btn-large'>Turn Left</button>
      <button id='strafe_right' class='btn-large'>Strafe Right</button>
      <button id='strafe_left' class='btn-large'>Strafe Left</button>
      <button id='stop' class='btn-large'>Stop</button>
     </div>  
    </div>

    <script>

      fwd = 0
      trn = 0
      stf = 0

      ////BUTTON INTERACTION
      $('.btn-large').data('url', "http://127.0.0.1:8071/motion-control/update");
      $('#forward').data('movement', {forward: 1});
      $('#backward').data('movement', {forward: -1});
      $('#turn_right').data('movement', {turn: 1});
      $('#turn_left').data('movement', {turn: -1});
      $('#strafe_right').data('movement', {strafe: 1});
      $('#strafe_left').data('movement', {strafe: -1});
      $('#stop').data('movement', {forward: 0})

      $('.btn-large').click(function() {
        var motionControl = $(this).data();
        // motionControl.direction
        // motionControl.value
        $.ajax({url: motionControl.url, data: motionControl.movement, dataType: "jsonp"});
      });

      
      ///KEYBOARDINTERACTION
      keycombos = {
        "w": function() {$.ajax({url:"http://127.0.0.1:8071/motion-control/update", data:{forward:1}, dataType: "jsonp"}) },
        "s": function() {$.ajax({url:"http://127.0.0.1:8071/motion-control/update", data:{forward:-1}, dataType: "jsonp"}) },
        "a": function() {$.ajax({url:"http://127.0.0.1:8071/motion-control/update", data:{turn:1}, dataType: "jsonp"}) },
        "d": function() {$.ajax({url:"http://127.0.0.1:8071/motion-control/update", data:{turn:-1}, dataType: "jsonp"}) },
        "q": function() {$.ajax({url:"http://127.0.0.1:8071/motion-control/update", data:{strafe:1}, dataType: "jsonp"}) },
        "e": function() {$.ajax({url:"http://127.0.0.1:8071/motion-control/update", data:{strafe:-1}, dataType: "jsonp"}) }
      };

      var my_combos = [];
      var my_scope = this;
        
      for (i in keycombos) {
        tempVal = {
          "keys"          : i,
          "is_exclusive"  : true,
          "val":keycombos[i],
          "on_keydown"    : keycombos[i],
          "on_keyup"      : function() {
            $.ajax({url:"http://127.0.0.1:8071/motion-control/update", dataType: "jsonp"});
          },
          "this"          : my_scope
          };
          my_combos.push(tempVal);  
        }
      keypress.register_many(my_combos);
         
    </script>
  </body>
</html>